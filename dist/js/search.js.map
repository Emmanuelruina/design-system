{"version":3,"file":"js/search.js","mappings":"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","sources":["webpack://cfpb-design-system/webpack/bootstrap","webpack://cfpb-design-system/webpack/runtime/make namespace object","webpack://cfpb-design-system/./docs/assets/js/search.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const lunr = require('lunr');\n\n/**\n * Update page markup with search results.\n *\n * @param {HTMLElement} elm - The element to inject the search results into.\n * @param {Array} results - A list of search result hits as objects.\n * @param {object} store - search index/meta data store in the window object.\n */\nfunction displaySearchResults(elm, results, store) {\n  // Search results content will be placed in here.\n  let resultsString = `\n    <p>\n      ${results.length} result${results.length > 1 ? 's' : ''}\n      for search of '${results.searchTerm}'.\n    </p>\n  `;\n\n  // Iterate over the results.\n  for (let i = 0; i < results.length; i++) {\n    const item = store[results[i].ref];\n    resultsString += `\n      <li>\n        <a href=\"../${item.url}\">\n          <h3>\n            ${item.title}\n          </h3>\n        </a>\n    `;\n\n    // Show some preview text under each search results item.\n    let previewText = '';\n    const searchMatchWordFragment = Object.keys(\n      results[i].matchData.metadata\n    )[0];\n    const searchMatchFields =\n      results[i].matchData.metadata[searchMatchWordFragment];\n\n    // Remove fields that should never appear as the preview.\n    delete searchMatchFields.id;\n    delete searchMatchFields.title;\n\n    const matchFieldKeys = Object.keys(searchMatchFields);\n    if (matchFieldKeys.length > 0) {\n      previewText = item[matchFieldKeys[0]];\n    }\n\n    const regex = new RegExp(results.searchTerm, 'gi');\n    previewText = previewText.replace(regex, function replace(match) {\n      return '<mark>' + match + '</mark>';\n    });\n\n    // Add the preview text.\n    if (previewText !== '') {\n      resultsString += `\n          <p>${previewText.substring(0, 150)}â€¦</p>\n        </li>\n      `;\n    }\n  }\n\n  elm.innerHTML = resultsString;\n}\n\n/**\n * Display no search results in markup.\n *\n * @param {HTMLElement} elm - the HTML element to write to.\n * @param {string} term - the search term\n */\nfunction displayNoSearchResults(elm, term) {\n  elm.innerHTML = `<li>No search results found for '${term}'.</li>`;\n}\n\n/**\n * @param {string} param - The URL parameter to get the value of.\n * @returns {string} The value of the URL parameter.\n */\nfunction getURLParam(param) {\n  const searchQuery = window.location.search.substring(1);\n  const vars = searchQuery.split('&');\n\n  for (let i = 0; i < vars.length; i++) {\n    const pair = vars[i].split('=');\n\n    if (pair[0] === param) {\n      return decodeURIComponent(pair[1].replace(/\\+/g, '%20'));\n    }\n  }\n  return '';\n}\n\n/**\n * @param {object} store - search index/meta data store in the window object.\n * @returns {object} A lunr index.\n */\nfunction initializeSearchIndex(store) {\n  // Initalize lunr with the fields it will be searching on.\n  // Title has a boost to indicate matches on this field are more important.\n  return lunr(function () {\n    this.field('id');\n\n    const searchFields = store.fields;\n    for (const fieldId in searchFields) {\n      this.field(searchFields[fieldId]);\n    }\n\n    // Add the data to lunr.\n    const data = {};\n    let field;\n    for (const key in store) {\n      data.id = key;\n      for (const fieldId in searchFields) {\n        field = searchFields[fieldId];\n        data[field] = store[key][field];\n      }\n      this.add(data);\n    }\n  });\n}\n\n// Create search-related references.\nconst searchTerm = getURLParam('searchQuery');\nconst searchResultsElm = document.getElementById('search-results');\nlet results = [];\n\n// Get the global search store.\nconst searchStore = window.searchStore;\n\n// Check if the URL has a search term set.\nif (searchTerm) {\n  document.getElementById('search-box').setAttribute('value', searchTerm);\n\n  // Get the lunr index.\n  const idx = initializeSearchIndex(searchStore);\n\n  // Perform a search on lunr index.\n  results = idx.search(searchTerm);\n  results.searchTerm = searchTerm;\n}\n\n// Are there any results?\nif (results.length === 0) {\n  displayNoSearchResults(searchResultsElm, searchTerm);\n} else {\n  // Display the results of the search.\n  displaySearchResults(searchResultsElm, results, searchStore);\n}\n"],"names":["lunr","require","displaySearchResults","elm","results","store","resultsString","length","searchTerm","i","item","ref","url","title","previewText","searchMatchWordFragment","Object","keys","matchData","metadata","searchMatchFields","id","matchFieldKeys","regex","RegExp","replace","match","substring","innerHTML","displayNoSearchResults","term","getURLParam","param","searchQuery","window","location","search","vars","split","pair","decodeURIComponent","initializeSearchIndex","field","searchFields","fields","fieldId","data","key","add","searchResultsElm","document","getElementById","searchStore","setAttribute","idx"],"sourceRoot":""}