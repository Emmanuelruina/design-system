// Import external dependencies
@import (reference) '@cfpb/cfpb-core/src/cfpb-core.less';
@import (reference) '@cfpb/cfpb-grid/src/cfpb-grid.less';

//
// Import Molecules
//
@import (less) 'molecules/card.less';
@import (less) 'molecules/heroes.less';

//
// Import Organisms
//
@import (less) 'organisms/card-group.less';
@import (less) 'organisms/featured-content-module.less';
@import (less) 'organisms/wells.less';
@import (less) 'organisms/email-signup.less';
@import (less) 'organisms/text-introduction.less';

/* ==========================================================================
   Design System
   Layout Helpers
   ========================================================================== */

//
// Theme variables
//

// Color variables

// .block
@block--bg: var(--gray-5);
@block--border: var(--gray-40);
@block--border-top: @block--border;
@block--border-right: @block--border;
@block--border-bottom: @block--border;
@block--border-left: @block--border;

// .content__main
@content__main-border: @block--border;

// .content__sidebar
@content__sidebar-bg: @block--bg;
@content__sidebar-border: @block--border;

// .content__line
@content__line: @block--border;

//
// Content layouts
//

.content-l {
  // Used to position __divider modifiers
  position: relative;

  // Tablet and above.
  .respond-to-min(@bp-sm-min, {
    .grid__nested-col-group();
  });
}

.content-l__col {
  // Mobile only.
  .respond-to-max(@bp-xs-max, {
    & + & {
      margin-top: unit( ( @grid_gutter-width / @base-font-size-px ), em );
    }
  });
}

// Tablet and above.
.respond-to-min(@bp-sm-min, {
  .content-l__col-1 {
    .grid__column( 12 );
  }

  .content-l__col-1-2 {
    .grid__column( 6 );
  }

  .content-l__col-1-3 {
    .grid__column( 4 );
  }

  .content-l__col-2-3 {
    .grid__column( 8 );
  }

  .content-l__col-3-8 {
    .grid__column( 3, 8 );
  }

  .content-l__col-5-8 {
    .grid__column( 5, 8 );
  }

  .content-l__col-1-4 {
    .grid__column( 3 );
  }

  .content-l__col-3-4 {
    .grid__column( 9 );
  }
});

//
// Content line
//

.content__line {
  height: 1px;
  background: @content__line;
}

//
// Main content and sidebar
//

.content__wrapper {
  &:extend(.wrapper all);
}

.content__main,
.content__intro {
  dd,
  dt,
  h3,
  h4,
  h5,
  h6,
  li,
  p,
  label {
    max-width: 41.875rem;
  }
}

.content__intro,
.content__main,
.content__sidebar {
  padding: unit(@grid_gutter-width / @base-font-size-px, em)
    unit(@grid_gutter-width / 2 / @base-font-size-px, em);

  // Tablet and above.
  .respond-to-min(@bp-sm-min, {
    .grid__column( 12 );

    padding:
    unit((@grid_gutter-width * 1.5) / @base-font-size-px, em)
    unit((@grid_gutter-width / 2) / @base-font-size-px, em);
  });

  // Desktop and above.
  .respond-to-min(@bp-med-min, {
    padding:
    unit((@grid_gutter-width * 1.5) / @base-font-size-px, em)
    0;
  });
}

// Desktop and above.
.respond-to-min(@bp-med-min, {
  .content__intro {
    .grid__column( 12 );
  }
});

// Set up standard multi-column content area layouts.
// Desktop and above.
.respond-to-min(@bp-med-min, {
  .content {
    &--1-3 {
      .content__sidebar {
        .grid__column( 3 );

        padding-right: unit( ( @grid_gutter-width / @base-font-size-px ), em );
      }

      .content__main {
        .grid__column( 9 );
        position: relative;

        &:after {
          content: '';
          border-left: 1px solid @content__main-border;
          position: absolute;
          top: unit( ( ( @grid_gutter-width * 1.5 ) / @base-font-size-px ), em );
          bottom: 0;
          left: unit( ( (-1 * @grid_gutter-width) / @base-font-size-px ), em );
        }
      }
    }

    &--2-1 {
      .content__main {
        .grid__column( 8 );

        &:after {
          right: unit( ( (-1 * @grid_gutter-width) / @base-font-size-px ), em );
        }
      }

      .content__sidebar {
        .grid__column( 4 );

        padding-left: unit( ( @grid_gutter-width / @base-font-size-px ), em );
      }
    }
  }
}); // END min-width 801 block

.content--flush-bottom {
  padding-bottom: 0;
}

.content--flush-top-on-small {
  // Tablet and below.
  .respond-to-max(@bp-sm-max, {
    padding-top: 0;
  });
}

.content--flush-all-on-small {
  // Tablet and below.
  .respond-to-max(@bp-sm-max, {
    padding: 0;
    border: none;
  });
}

//
// Block
//

.block {
  margin-top: unit((@grid_gutter-width * 2) / @base-font-size-px, em);
  margin-bottom: unit((@grid_gutter-width * 2) / @base-font-size-px, em);

  &--border-top {
    border-top: 1px solid @block--border-top;
  }

  &--border-right {
    border-right: 1px solid @block--border-right;
  }

  &--border-bottom {
    border-bottom: 1px solid @block--border-bottom;
  }

  &--border-left {
    border-left: 1px solid @block--border-left;
  }

  &--border {
    border: 1px solid @block--border;
  }

  &--flush-top {
    margin-top: 0 !important;

    &.block--border,
    &.block--border-top {
      border-top: none;
    }
  }

  &--flush-bottom {
    margin-bottom: 0 !important;

    &.block--border,
    &.block--border-bottom {
      border-bottom: none;
    }
  }

  &--flush-sides {
    margin-right: -(@grid_gutter-width / 2);
    margin-left: -(@grid_gutter-width / 2);

    // Mobile only.
    .respond-to-max(@bp-xs-max, {
      &.block--border,
      &.block--border-right,
      &.block--border-left {
        border-right: none;
        border-left: none;
      }
    });

    // Tablet and above.
    .respond-to-min(@bp-sm-min, {
      margin-right: -@grid_gutter-width;
      margin-left: -@grid_gutter-width;
    });
  }

  &--flush {
    margin-top: 0 !important;
    margin-right: -(@grid_gutter-width / 2);
    margin-bottom: 0 !important;
    margin-left: -(@grid_gutter-width / 2);

    &.block--border,
    &.block--border-top,
    &.block--border-bottom {
      border-top: none;
      border-bottom: none;
    }

    // Mobile only.
    .respond-to-max(@bp-xs-max, {
      &.block--border,
      &.block--border-right,
      &.block--border-left {
        border-right: none;
        border-left: none;
      }
    });

    // Tablet and above.
    .respond-to-min(@bp-sm-min, {
      margin-right: -@grid_gutter-width;
      margin-left: -@grid_gutter-width;
    });
  }

  &--bg {
    padding: unit(@grid_gutter-width / @base-font-size-px, em)
      unit((@grid_gutter-width / 2) / @base-font-size-px, em);
    padding-bottom: unit((@grid_gutter-width * 2) / @base-font-size-px, em);
    background: @block--bg;

    // Tablet and above.
    .respond-to-min(@bp-sm-min, {
      padding: unit((@grid_gutter-width * 1.5 ) / @base-font-size-px, em )
      unit( ( @grid_gutter-width / @base-font-size-px ), em );
    });
  }

  &--padded-top {
    padding-top: unit(@grid_gutter-width / @base-font-size-px, em);
    margin-top: unit(@grid_gutter-width / @base-font-size-px, em);
  }

  &--padded-bottom {
    padding-bottom: unit(@grid_gutter-width / @base-font-size-px, em);
    margin-bottom: unit(@grid_gutter-width / @base-font-size-px, em);
  }

  &--sub {
    margin-top: unit(@grid_gutter-width / @base-font-size-px, em);
    margin-bottom: unit(@grid_gutter-width / @base-font-size-px, em);
  }

  // Overrides for when .block is also a column
  .content-l__col&,
  .content-l__col&--sub {
    // Tablet and above.
    .respond-to-min(@bp-sm-min, {
      margin-top: 0;
    });
  }
}

//
// grid helpers
//

.wrapper {
  // Desktop and above.
  .respond-to-min(@bp-med-min, {
    .grid__wrapper();
  });

  &--match-content {
    padding-left: @grid_gutter-width / 2;
    padding-right: @grid_gutter-width / 2;

    // Tablet and above.
    .respond-to-min(@bp-sm-min, {
      padding-left: @grid_gutter-width;
      padding-right: @grid_gutter-width;
      max-width: @grid_wrapper-width - @grid_gutter-width;
    });
  }
}
